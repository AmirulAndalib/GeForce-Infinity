id: org.flathub.electron-sample-app
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
sdk-extensions:
    - org.freedesktop.Sdk.Extension.node20

command: electron-sample-app

finish-args:
    - --share=network
    - --socket=x11
    - --socket=wayland
    - --filesystem=home
    - --device=dri
    - --env=PATH=/usr/lib/sdk/node20/bin:$PATH

modules:
    - name: electron-sample-app
      buildsystem: simple
      build-commands:
          - |
              export PATH=/usr/lib/sdk/node20/bin:$PATH
              npm install
              npm run build-flatpak
          - chmod +x flatpak-run
          - install -Dm755 flatpak-run /app/bin/electron-sample-app
          - mkdir -p /app/share/electron-sample-app
          - cp -r dist/* /app/share/electron-sample-app/
      sources:
          - type: dir
            path: ./
